A fsm implementation with a method-chain edsl.

WIP.
